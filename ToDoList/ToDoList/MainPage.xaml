<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml" xmlns:todolist="clr-namespace:ToDoList.ViewModel"
             x:Class="ToDoList.MainPage"
             x:Name="thisPage">

    <ContentPage.BindingContext>
        <todolist:ViewModel/>
    </ContentPage.BindingContext>

    <StackLayout BackgroundColor="#FCF8E8">
        <Label Text="Nowe zadanie: " 
               TextColor="#7C9473" 
               FontSize="17"
               HorizontalTextAlignment="Center"
               />
        <Entry TextColor="Black"
               Placeholder="bruh"
               PlaceholderColor="Black"
               BackgroundColor="White"
              Text="{Binding NewTaskName}"
            />
        <Button HorizontalOptions="Center" 
                BackgroundColor="#E7DEC8"
                Text="Dodaj zadanie" 
                TextColor="#7C9473"
                Command="{Binding AddNewTask}"
            />

        <Label Text="Lista do zrobienia"
               TextColor="#7C9473" 
               FontSize="20"
               FontAttributes="Bold" 
               HorizontalTextAlignment="Center"
            />
      
        <ListView ItemsSource="{Binding CollectionOfTasks}" HasUnevenRows="True"
                >
            <ListView.ItemTemplate>
                <DataTemplate>
                    <ViewCell>
                        <StackLayout BackgroundColor="#7C9473" RadioButtonGroup.SelectedValue="{Binding StateOfaTask}"
                                     RadioButtonGroup.GroupName="{Binding NameOfTask}">
                            <Label Text="Nazwa zadania:"/>
                            <Label Text="{Binding NameOfTask}" 
                                    TextColor="Black"/>
                    
                            <RadioButton Content="Do zrobienia" Value="Do Zrobienia" TextColor="#7C9473" BackgroundColor="White"/>
                            <RadioButton Content="Zrobione" Value="Zrobione" TextColor="#7C9473" BackgroundColor="White" />
                            
                            <Button Text="Usuń" Command="{Binding Source={x:Reference thisPage}, 
                                Path=BindingContext.DeleteTask}" CommandParameter="{Binding}"
                                    />
                        </StackLayout>
                    </ViewCell>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>

        <ListView ItemsSource="{Binding CollectionOfDeletedTasks}" HasUnevenRows="True"
               BackgroundColor="#7C9473" >
            <ListView.ItemTemplate>
                <DataTemplate>
                    <ViewCell>
                        <StackLayout >
                            <Label Text="Nazwa usuniętego zadania:"/>
                            <Label Text="{Binding NameOfTask}" 
                                     TextColor="Black"/>

                            <Label Text="{Binding StateOfaTask}"/>
                        </StackLayout>
                    </ViewCell>
                </DataTemplate>
            </ListView.ItemTemplate>


        </ListView>
        
    </StackLayout>

</ContentPage>
